<?php

class Film {
    private string $titre;
    private DateTime $dateDeSortie;
    private DateTime $dureeFilm;
    private string $realisateurFilm;
    private string $synopsisFilm;
    private array $castings;

    // Constructeur
    public function __construct(string $titre, string $dateDeSortie, int $dureeFilm, string $realisateurFilm, string $synopsisFilm) {
        $this->titre = $titre;
        $this->dateDeSortie = new DateTime($dateDeSortie);
        $this->dureeFilm = new DateTime($dureeFilm);
        $this->realisateurFilm = $realisateurFilm;
        $this->synopsisFilm = $synopsisFilm;
        // tableau vide du casting
        $this->castings = [];
    }

    // Titre
    public function getTitre() {
        return $this->titre;
    }

    public function setTitre($titre) {
        $this->titre = $titre;
        return $this;
    }

    // Date de sortie
    public function getDateDeSortie() {
        return $this->dateDeSortie->format('d-m-Y');
    }

    public function setDateDeSortie($dateDeSortie) {
        $this->dateDeSortie = $dateDeSortie->format('d-m-Y');
        return $this;
    }

    // Durée du film
    public function getDureeFilm() {
        return $this->dureeFilm->format('i'); // format en minutes
    }

    public function setDureeFilm($dureeFilm) {
        $this->dureeFilm = $dureeFilm->format('i');
        return $this;
    }

    // Réalisateur du film
    public function getRealisateurFilm() {
        return $this->realisateurFilm;
    }

    public function setRealisateurFilm($realisateurFilm) {
        $this->realisateurFilm = $realisateurFilm;
        return $this;
    }

    // Synopsis du film
    public function getSynopsisFilm() {
        return $this->synopsisFilm;
    }

    public function setSynopsisFilm($synopsisFilm) {
        $this->synopsisFilm = $synopsisFilm;
        return $this;
    }

    // Méthodes
    public function calculDuree(DateTime $dureeFilm) {
        // 1H = 60 min donc on par exemple Batman de Tim Burton dure 2h06min
        // (2h x 60min) + 6min
        $dateActuelle = new DateTime();
        $difference = $dateActuelle->diff($dureeFilm);
        $dureeMinutes = $difference-> h * 60 + $difference->i;
        return $dureeMinutes;
    }

    // on veut récupérer toutes les informations sur le film
    public function getInfosFilm() {
        return $this->getTitre(). " ". $this->getDateDeSortie(). " ".$this->calculDuree(). " ". $this->getRealisateurFilm(). " ". $this->getSynopsisFilm();
    }

}

?>